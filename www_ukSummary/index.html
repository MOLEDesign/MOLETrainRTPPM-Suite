<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	
	<!-- Refresh every 5 mins -->
	<meta http-equiv="refresh" content="300">
	
	<title>UK PPM Viewer</title>
	
	<!-- define fonts -->
	<link rel="stylesheet" href="assets/css/sourcesansproreg.css" type="text/css" charset="utf-8" />
	<link rel="stylesheet" href="assets/css/sourcesansprosemibold.css" type="text/css" charset="utf-8" />
	
	<link rel="stylesheet" href="assets/css/site.css" />
	<link rel="stylesheet" href="assets/css/table.css" />
	
	<!-- define scripts -->
	<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
	<script src="assets/js/my.js"></script>
</head>

<body>
<h1> Real Time Public Performance Measure (PPM)</h1>

<div class="tiptext">Text
<div class="description"> Here is the big fat description box</div>
</div>

<div id="placeholder"></div>
<script>
$.getJSON('http://development.moledesign.biz/node/output.json', function (data) {
var output = '<table cellspacing="0" width="99%">';
output += '<thead>';
output += '<tr>';
output += '<th>Region</th>';
output += '<th>PPM</th>';
output += '<th>PPM (2 hours)</th>';
output += '<th>Trains on Time</th>';
output += '<th>Late Trains</th>';
output += '<th>Cancelled or significantly late</th>';
output += '</tr>';
output += '</thead>';

output += '<tbody>';
output += '<tr class="highlight">';
output += '<td>National</td>';
output += '<td>' + data.RTPPMDataMsgV1.RTPPMData.NationalPage.NationalPPM.PPM.text + '</td>';
output += '<td>' + data.RTPPMDataMsgV1.RTPPMData.NationalPage.NationalPPM.RollingPPM.text + '</td>';
output += '<td>' + data.RTPPMDataMsgV1.RTPPMData.NationalPage.NationalPPM.OnTime + '</td>';
output += '<td>' + data.RTPPMDataMsgV1.RTPPMData.NationalPage.NationalPPM.Late + '</td>';
output += '<td>' + data.RTPPMDataMsgV1.RTPPMData.NationalPage.NationalPPM.CancelVeryLate + '</td>';
output += '</tr>';

for (var i in data.RTPPMDataMsgV1.RTPPMData.NationalPage.Sector) {
output += "<tr>";
output += "<td>" + data.RTPPMDataMsgV1.RTPPMData.NationalPage.Sector[i].sectorDesc + "</td>";
output += "<td>" + data.RTPPMDataMsgV1.RTPPMData.NationalPage.Sector[i].SectorPPM.PPM.text + "</td>";
output += "<td>" + data.RTPPMDataMsgV1.RTPPMData.NationalPage.Sector[i].SectorPPM.RollingPPM.text + "</td>";
output += "<td>" + data.RTPPMDataMsgV1.RTPPMData.NationalPage.Sector[i].sectorDesc + "</td>";
output += "<td>" + data.RTPPMDataMsgV1.RTPPMData.NationalPage.Sector[i].SectorPPM.PPM.text + "</td>";
output += "<td>" + data.RTPPMDataMsgV1.RTPPMData.NationalPage.Sector[i].SectorPPM.RollingPPM.text + "</td>";
output += "</tr>";
}
output += "</tbody>";
output += "</table>";
$("#placeholder").html(output);
});						
</script>

<h1>All UK PPM Data</h1>
<div id="placeholder2"></div>
<script>
$.getJSON('http://development.moledesign.biz/node/output.json', function (data) {
var output = '<table cellspacing="0" width="99%">';
output += "<thead>";
output += "<tr>";
output += "<th>Operator</th>";
output += "<th>PPM</th>";
output += "<th>PPM (2 hours)</th>";
output += "<th>Operator</th>";
output += "<th>PPM</th>";
output += "<th>PPM (2 hours)</th>";
output += "</tr>";
output += "</thead>";
output += "<tbody>";

// Start loop of operators, loopcount is used to allocate 2 operators per line //
output += "<tr>";
var loopcount = 0;
for (var i in data.RTPPMDataMsgV1.RTPPMData.NationalPage.Operator) {
	loopcount ++;
	
	

	
	output += '<td><div class="tiptext">' + data.RTPPMDataMsgV1.RTPPMData.NationalPage.Operator[i].name;
	output += '<div class="description">Train Info</div></div></td>';
	output += '<td>' + data.RTPPMDataMsgV1.RTPPMData.NationalPage.Operator[i].PPM.text + '</td>';
	output += '<td>' + data.RTPPMDataMsgV1.RTPPMData.NationalPage.Operator[i].RollingPPM.text + '</td>';
	if (loopcount % 2 ==0) {
		output += '</tr>';
		output += '<tr>';
	}
}
output += "</tbody>";
output += "</table>";
$("#placeholder2").html(output);
});						
</script>


<h1>Information</h1>
<div id="placeholder3"></div>
<script>
$.getJSON('http://development.moledesign.biz/node/output.json', function (data) {


var output = '<table cellspacing="0" width="99%">';
output += "<tr>";
output += "<td colspan='3'>" + data.RTPPMDataMsgV1.RTPPMData.NationalPage.WebFixedMsg2 + "</td>";
output += "</tr>";
output += "<tr>";
output += "<td colspan='3'>" + data.RTPPMDataMsgV1.RTPPMData.NationalPage.WebFixedMsg1 + "</td>";
output += "</tr>";

output += "</tbody>";
output += "</table>";
$("#placeholder3").html(output);
});						
</script>

<h1>Alerts</h1>
<div id="placeholder4"></div>
<script>
$.getJSON('http://development.moledesign.biz/node/output.json', function (data) {


var output = '<table cellspacing="0" width="99%">';
output += "<tr>";
output += "<td colspan='3'>" + data.RTPPMDataMsgV1.RTPPMData.NationalPage.WebMsgOfMoment + "</td>";
output += "</tr>";

output += "</tbody>";
output += "</table>";
$("#placeholder4").html(output);
});						
</script>

</div>

  
</body>

</html>
